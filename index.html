<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Study Quiz</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="confetti" class="confetti-container"></div>

  <div class="wrap">
    <header class="top">
      <div>
        <h1 id="title">Study Quiz</h1>
        <div class="sub" id="subtitle"></div>
      </div>
      <div class="controls">
        <div class="theme-wrap">
          <select id="themeSelect" class="theme-select" title="Choose theme"></select>
          <span id="themeHint" class="theme-hint">ğŸ”’ More at L2</span>
        </div>
        <label class="pill">
          <input type="checkbox" id="lenientToggle" />
          <span>Accept Close Answers</span>
        </label>
        <label class="pill voice-pill">
          <input type="checkbox" id="voiceToggle" />
          <span>ğŸ”Š Read Aloud</span>
        </label>
        <button id="trophyBtn" class="btn ghost trophy-btn" title="My Trophies">ğŸ†</button>
        <button id="reloadBtn" class="btn ghost" title="Reload questions" aria-label="Reload questions">â†»</button>
      </div>
    </header>

    <!-- Quiz Selector -->
    <section class="quizSelector">
      <label for="quizSelect">Study Guide:</label>
      <select id="quizSelect" class="quiz-select"></select>
    </section>

    <!-- Test Countdown -->
    <section id="countdownSection" class="countdown-section hidden">
      <div class="countdown-main">
        <span id="countdownIcon" class="countdown-icon">ğŸ“…</span>
        <span id="countdownText" class="countdown-text">Loading...</span>
      </div>
      <div id="countdownTip" class="countdown-tip hidden"></div>
    </section>

    <!-- XP & Level Bar -->
    <section class="xpSection">
      <div class="xp-header">
        <span id="levelText">Level 1: Beginner</span>
        <span id="masteryText">Mastered: 0/0 â­</span>
      </div>
      <div class="xp-bar">
        <div id="xpBarFill" class="xp-bar-fill"></div>
      </div>
      <div id="xpText" class="xp-text">0 XP</div>
    </section>

    <!-- Daily Goal Section -->
    <section class="daily-goal-section">
      <div class="daily-goal-header">
        <div class="daily-goal-title">
          <span>ğŸ¯ Daily Goal</span>
          <select id="dailyGoalSelect" class="daily-goal-select">
            <option value="5">5 questions</option>
            <option value="10" selected>10 questions</option>
            <option value="15">15 questions</option>
            <option value="20">20 questions</option>
          </select>
        </div>
        <div id="dailyStreak" class="daily-streak hidden">ğŸ”¥ <span id="streakDays">0</span> day streak!</div>
      </div>
      <div class="daily-progress-bar">
        <div id="dailyProgressFill" class="daily-progress-fill"></div>
      </div>
      <div id="dailyProgressText" class="daily-progress-text">0/10 questions today</div>
      <div class="calendar-grid" id="calendarGrid"></div>
    </section>

    <section class="modeBar">
      <button class="btn mode-btn" id="modeStudy">ğŸ“š Study<br><small>Look at answers first</small></button>
      <button class="btn mode-btn" id="modePractice">ğŸ¯ Practice<br><small>Learn at your own pace</small></button>
      <button class="btn mode-btn" id="modeStreak">ğŸ”¥ Streak<br><small>2 wrong and you're out!</small></button>
      <button class="btn mode-btn" id="modeBoss">ğŸ‘‘ Boss<br><small>Keep going until you get them all</small></button>
      <button class="btn mode-btn challenge-btn" id="modeChallenge">ğŸ‘« Challenge<br><small>Quiz with a friend!</small></button>
    </section>

    <!-- Challenge Mode Player Indicator -->
    <div id="challengeIndicator" class="challenge-indicator hidden">
      <div class="challenge-turn" id="challengeTurn">Your Turn!</div>
      <div class="challenge-scores">
        <span id="player1Score" class="player-score player1">You: 0</span>
        <span class="vs">VS</span>
        <span id="player2Score" class="player-score player2">Friend: 0</span>
      </div>
    </div>

    <main class="card">
      <div class="statusRow">
        <div class="status" id="statusLeft" aria-live="polite">Score: 0</div>
        <div class="status" id="statusMid" aria-live="polite">Streak: 0</div>
        <div class="status" id="statusRight" aria-live="polite">Q: 0/0</div>
      </div>

      <div id="errorBox" class="error hidden"></div>
      <div id="loadingIndicator" class="loading hidden">Loading questions...</div>

      <!-- Study Mode Area -->
      <div id="studyArea" class="studyArea hidden">
        <div id="studyCard" class="study-card" tabindex="0" role="button" aria-label="Flashcard - press Enter or Space to flip"></div>
        <div class="study-controls">
          <button id="studyPrev" class="btn nav-btn">â¬…ï¸ Previous</button>
          <span id="studyProgress">Card 1 of 10</span>
          <button id="studyNext" class="btn nav-btn">Next â¡ï¸</button>
          <button id="studyDone" class="btn primary hidden">âœ… Ready to Quiz!</button>
        </div>
      </div>

      <!-- Quiz Area -->
      <div id="questionBox" class="questionBox hidden">
        <div class="prompt" id="prompt"></div>
        <div id="answerArea" class="answerArea"></div>

        <div class="actions">
          <button id="submitBtn" class="btn primary">âœ”ï¸ Submit Answer</button>
          <button id="skipBtn" class="btn ghost">Skip â­ï¸</button>
          <button id="nextBtn" class="btn primary hidden">Next Question â¡ï¸</button>
          <button id="closeEnoughBtn" class="btn close-enough hidden">ğŸ‘ Close Enough</button>
        </div>

        <div id="feedback" class="feedback hidden" aria-live="assertive"></div>
      </div>
    </main>

    <footer class="footer">
      <div id="footerHint" class="parent-hint">For parents: Add study guides to <code>content/</code> folder</div>
      <button id="resetBtn" class="btn ghost reset-btn">ğŸ”„ Start Over</button>
    </footer>
  </div>

  <!-- Level Up Modal -->
  <div id="levelUpModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-icon">ğŸ‰</div>
      <h2>Level Up!</h2>
      <p id="levelUpMessage">You reached a new level!</p>
      <button id="levelUpClose" class="btn primary">Awesome!</button>
    </div>
  </div>

  <!-- Riddle Modal -->
  <div id="riddleModal" class="modal hidden">
    <div class="modal-content riddle-modal">
      <div class="modal-icon" id="riddleIcon">ğŸ</div>
      <h2>Riddle Time!</h2>
      <p id="riddleQuestion" class="riddle-question"></p>
      <button id="riddleReveal" class="btn primary">Show Answer!</button>
      <p id="riddleAnswer" class="riddle-answer hidden"></p>
      <div id="stickerReward" class="sticker-reward hidden">
        <p>You earned a sticker!</p>
        <div id="rewardStickerPreview" class="reward-sticker-preview"></div>
        <p id="rewardStickerName" class="reward-sticker-name"></p>
      </div>
      <button id="riddleClose" class="btn primary hidden">Collect Sticker! ğŸ‰</button>
    </div>
  </div>

  <!-- Achievement Earned Toast -->
  <div id="achievementToast" class="achievement-toast hidden">
    <div class="achievement-toast-content">
      <span id="achievementIcon" class="achievement-icon">ğŸ†</span>
      <div class="achievement-info">
        <div class="achievement-label">Achievement Unlocked!</div>
        <div id="achievementName" class="achievement-name">Badge Name</div>
      </div>
    </div>
  </div>

  <!-- Trophy Case Modal -->
  <div id="trophyModal" class="modal hidden">
    <div class="modal-content trophy-modal">
      <div class="modal-icon">ğŸ†</div>
      <h2>My Trophies</h2>
      <div id="trophyGrid" class="trophy-grid"></div>
      <div id="trophyProgress" class="trophy-progress">0/0 badges earned</div>
      <button id="trophyClose" class="btn primary">Close</button>
    </div>
  </div>

  <!-- Sticker Sidebar -->
  <aside id="stickerSidebar" class="sticker-sidebar">
    <div class="sticker-header">
      <span>ğŸŒŸ My Stickers</span>
      <span id="stickerCount" class="sticker-count">0</span>
    </div>
    <div id="stickerGrid" class="sticker-grid"></div>
    <div id="stickerEmpty" class="sticker-empty">Get a streak to earn stickers!</div>
  </aside>

  <script src="app.js"></script>
</body>
</html>
